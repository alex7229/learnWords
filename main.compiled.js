!function n(t,e,o){function r(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(n){var e=t[s][1][n];return r(e?e:n)},l,l.exports,n,t,e,o)}return e[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(n,t,e){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function n(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}(),i=function(){function n(){o(this,n)}return r(n,null,[{key:"getTranslation",value:function(){var n=document.getElementById("word").value;n&&s.getWordFromServer(n).then(function(n){c.yandex(a.getData(n))},function(t){404===t.status&&s.yandexApi(n).then(function(n){c.yandex(a.getData(n))})})}},{key:"getMeaning",value:function(){var n=document.getElementById("word").value;n&&s.googleApi(n).then(function(n){c.google(u.getData(n))})}},{key:"listenButtons",value:function(){document.getElementById("getMeaning").onclick=n.getMeaning,document.getElementById("getTranslation").onclick=n.getTranslation,document.getElementById("checkAnswer").onclick=f.checkAnswer.bind(f),document.getElementById("sendQuestion").onclick=f.sendQuestion.bind(f)}}]),n}(),s=function(){function n(){o(this,n)}return r(n,null,[{key:"yandexApi",value:function(n){return new Promise(function(t){fetch("/getTranslation",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({word:n})}).then(function(n){t(n.text())})})}},{key:"googleApi",value:function(n){return new Promise(function(t){fetch("/getMeaning",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({word:n})}).then(function(n){t(n.text())})})}},{key:"getWordFromServer",value:function(n){return new Promise(function(t){fetch("http://tup1tsa.bounceme.net/learnWords/wordsLists/yandexTranslations/"+n+".txt").then(function(n){t(n.text())},function(n){reject(n)})})}},{key:"getWordList",value:function(){return new Promise(function(n){fetch("http://tup1tsa.bounceme.net/learnWords/wordsLists/sorted_34k.txt").then(function(t){n(t.text())},function(n){reject(n)})})}}]),n}(),a=function(){function n(){o(this,n)}return r(n,null,[{key:"getData",value:function(t){var e=JSON.parse(t);if(0!==e.def.length)return e.def.map(function(t){return{type:t.pos||"",transcription:t.ts?"["+t.ts+"]":"",translations:t.tr.map(function(t){return{examples:n.transformExamples(t.ex),synonyms:n.transformSynonyms(t.syn),synonymsEn:n.transformSynonyms(t.mean),translationType:t.pos,translation:t.text}})}})}},{key:"transformExamples",value:function(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return n.map(function(n){return n.text+" - "+n.tr[0].text})}},{key:"transformSynonyms",value:function(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return n.map(function(n){return n.text})}},{key:"findCorrectAnswers",value:function(n){return n.map(function(n){return n.translations.map(function(n){return n.translation.toLowerCase()})}).reduce(function(n,t){return n.concat(t)},[])}}]),n}(),u=function(){function n(){o(this,n)}return r(n,null,[{key:"getData",value:function(t){return{definitionLists:n.findDefinitionLists(n.findDefinitionChunks(t)),webDefinitionLists:n.findWebDefinitionLists(n.findWebDefinitionChunk(t)),grammar:n.findGrammar(t)}}},{key:"findDefinitionChunks",value:function(n){for(var t=/<b>(.*)\n[\s\S]*?<\/[\s\S]*?<div class=std style="padding-left:40px">([\s\S]*?)(<div id="forEmbed">|<hr>)/g,e=void 0,o=[];null!==(e=t.exec(n));)o.push({typeOfWord:e[1],body:e[2]});return o}},{key:"findDefinitionLists",value:function(t){return t.map(function(t){var e=t.body.split(/<li style="list-style:decimal">/g).slice(1).map(function(t){return n.deleteUnnecessaryRow(t)});return{typeOfWord:t.typeOfWord,list:e}})}},{key:"deleteUnnecessaryRow",value:function(n){var t=/color:#767676/;return n.match(t)?n:n.replace(/<div[\s\S]*<\/div>/,"")}},{key:"findWebDefinitionChunk",value:function(n){var t=/Web Definitions[\s\S]*<\/ol>/g;return n.match(t)[0]}},{key:"findWebDefinitionLists",value:function(n){for(var t=[],e=/<li style="list-style:decimal; margin-bottom:10px;">([\s\S]*?)<\/li>/g,o=void 0;null!==(o=e.exec(n));)t.push(o[1]);return t}},{key:"findGrammar",value:function(n){var t=/<span style="color:#767676">([\s\S]*?)<\/span>/;return n.match(t)[1].slice(0,-2)}}]),n}(),c=function(){function n(){o(this,n)}return r(n,null,[{key:"yandex",value:function(n){document.getElementById("translationBox").innerHTML=n.map(function(n){return'<br><span class="ital"><b>'+n.type+"</b></span> "+n.transcription+" "+n.translations.map(function(n,t){var e="<br>"+(t+1)+") "+n.translation;return 0!==n.examples.length&&(e+='. <br><span class="tabbed">Examples:</span> '+n.examples.join("; ")),0!==n.synonyms.length&&(e+='. <br><span class="tabbed">Synonyms:</span> '+n.synonyms.join("; ")),0!==n.synonymsEn.length&&(e+='. <br><span class="tabbed">Synonyms (en):</span> '+n.synonymsEn.join("; ")),e}).join("")})+"<hr>"}},{key:"google",value:function(n){var t='<span class="googleGrammar"><b>Grammar:</b> '+n.grammar+"</span><br>",e=n.definitionLists.map(function(n){return"<b>"+n.typeOfWord+"</b><br><ol>\n                "+n.list.map(function(n){return"<li>"+n+"</li>"}).join("")+"</ol><hr>"}),o="<b>Web Results:</b><ol>\n            "+n.webDefinitionLists.map(function(n){return"<li>"+n+"</li>"}).join("")+"</ol>";document.getElementById("dictionaryBox").innerHTML=t+e+o}},{key:"showQuestion",value:function(n){document.getElementById("questionedWord").textContent=n}}]),n}(),l=function(){function n(){o(this,n),this.correctAnswers=[],this.allWords=[]}return r(n,[{key:"getAllWords",value:function(){var n=this;s.getWordList().then(function(t){n.allWords=JSON.parse(t)},function(n){throw n})}},{key:"checkAnswer",value:function(){var n=document.getElementById("answerWord").value;this.correctAnswers.includes(n)?console.log("answer is correct"):console.log("answer is incorrect")}},{key:"sendQuestion",value:function(){var n=Math.ceil(1e3*Math.random()),t=this.allWords[n].word;this.getAnswer(t),c.showQuestion(t)}},{key:"getAnswer",value:function(n){var t=this;s.getWordFromServer(n).then(function(n){t.correctAnswers=a.findCorrectAnswers(a.getData(n))},function(e){404===e.status&&s.yandexApi(n).then(function(n){t.correctAnswers=a.findCorrectAnswers(a.getData(n))})})}}]),n}(),f=new l;f.getAllWords(),window.onload=function(){setTimeout(function(){f.sendQuestion(),i.listenButtons()},2500)}},{}]},{},[1]);
//# sourceMappingURL=main.compiled.js.map
